import{C as F,D as v,a as S,b as y,c as C,d as P,e as _,f as b,g as I,h as N,t as W,u as E}from"./chunk-D2G6HKVK.js";import{a as U,c as B}from"./chunk-UZ4HAGIG.js";import{a as O}from"./chunk-JMDEYX64.js";import{Ea as o,Fa as a,Ka as w,Na as f,Qa as l,Ra as m,Sa as d,U as g,Ua as M,ob as h,pa as s,qa as c}from"./chunk-JO6IUR6O.js";var k=(()=>{let n=class n{constructor(t){this.apiService=t,this.user={},this.newPassword=""}ngOnInit(){let t=JSON.parse(localStorage.getItem("currentUser")||"{}");t.id&&this.apiService.getUser(t.id).subscribe(i=>{this.user=i},i=>{console.error("Error loading user profile",i)})}onSubmit(){this.newPassword&&(this.user.password=this.newPassword),this.apiService.updateUser(this.user.id,this.user).subscribe(t=>{localStorage.setItem("currentUser",JSON.stringify(t)),alert("Profile updated successfully")},t=>{console.error("Error updating profile",t),alert("An error occurred while updating the profile")})}};n.\u0275fac=function(i){return new(i||n)(c(O))},n.\u0275cmp=g({type:n,selectors:[["app-profile"]],standalone:!0,features:[M],decls:12,vars:3,consts:[[1,"profile-container"],[3,"ngSubmit"],["matInput","","placeholder","Username","name","username","required","",3,"ngModelChange","ngModel"],["matInput","","type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","placeholder","New Password","name","newPassword",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"h2"),f(2,"My Profile"),a(),o(3,"form",1),w("ngSubmit",function(){return r.onSubmit()}),o(4,"mat-form-field")(5,"input",2),d("ngModelChange",function(e){return m(r.user.username,e)||(r.user.username=e),e}),a()(),o(6,"mat-form-field")(7,"input",3),d("ngModelChange",function(e){return m(r.user.email,e)||(r.user.email=e),e}),a()(),o(8,"mat-form-field")(9,"input",4),d("ngModelChange",function(e){return m(r.newPassword,e)||(r.newPassword=e),e}),a()(),o(10,"button",5),f(11,"Update Profile"),a()()()),i&2&&(s(5),l("ngModel",r.user.username),s(2),l("ngModel",r.user.email),s(2),l("ngModel",r.newPassword))},dependencies:[h,N,b,S,y,C,I,_,P,E,W,v,F,B,U],styles:[".profile-container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;padding:20px;box-shadow:0 0 10px #0000001a}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}"]});let u=n;return u})();export{k as ProfileComponent};
